import gc
import micropython
gc.collect()
micropython.mem_info()
print('-----------------------------')
print('Initial free: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))
def func():
    a = bytearray(10000)
gc.collect()
print('Func definition: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))
func()
print('Func run free: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))
gc.collect()
print('Garbage collect free: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))
print('-----------------------------')
micropython.mem_info(1)


##output
# 
# stack: 524 out of 7936
# GC: total: 192064, used: 4816, free: 187248
#  No. of 1-blocks: 37, 2-blocks: 15, max blk sz: 64, max free sz: 11557
# -----------------------------
# Initial free: 187248 allocated: 4816
# Func definition: 187232 allocated: 4832
# Func run free: 177088 allocated: 14976
# Garbage collect free: 177232 allocated: 14832
# -----------------------------
# stack: 524 out of 7936
# GC: total: 192064, used: 14960, free: 177104
#  No. of 1-blocks: 43, 2-blocks: 15, max blk sz: 625, max free sz: 10932
# GC memory layout; from 20006300:
# 00000: h=MhhhDhhS..SDhDBBBh===hDBDh====B=BBBBBBSB=B.B=BBB.B=.B.B=Bh===B
# 00400: B=h===========Bh==h===================Bh====h=================h=
# 00800: ==============================================================h=
# 00c00: ==============================================================h=
# 01000: h=Bh==..h.SS............h=======h=====....h=...................S
# 01400: Sh=........Sh=..h==============h=h=.............................
# 01800: h==.......................................h==...............Sh=h
# 01c00: ================================================================
# 02000: ================================================================
# 02400: ================================================================
# 02800: ================================================================
# 02c00: ================================================================
# 03000: ================================================================
# 03400: ================================================================
# 03800: ================================================================
# 03c00: ================================================================
# 04000: ================================================................
#        (170 lines all free)
# 2ec00: ....................................
