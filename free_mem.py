import gc
import micropython
gc.collect()
print('-----------------------------')
micropython.mem_info()
print('-----------------------------')
print('Initial of the program before function definition \n free: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))


def func():
    list2 = list()
    upper_limit = 32768
    for i in range(upper_limit):
        list2.append(i+1)

gc.collect()
print('after Func definition: free: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))
func()
print('Func run free: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))
gc.collect()
print('Garbage collect free: {} allocated: {}'.format(gc.mem_free(), gc.mem_alloc()))
print('-----------------------------')
micropython.mem_info(1)
#includes the amount of stack and heap used
# In verbose mode it prints out the entire heap indicating which blocks are used and which are free.

##output
# -----------------------------
# stack: 524 out of 7936
# GC: total: 192064, used: 4944, free: 187120
#  No. of 1-blocks: 38, 2-blocks: 14, max blk sz: 64, max free sz: 11534
# -----------------------------
# Initial of the program before function definition
#  free: 187120 allocated: 4944
# after Func definition: free: 187104 allocated: 4960
# Func run free: 55872 allocated: 136192
# Garbage collect free: 56032 allocated: 136032
# -----------------------------
# stack: 524 out of 7936
# GC: total: 192064, used: 136160, free: 55904
#  No. of 1-blocks: 44, 2-blocks: 14, max blk sz: 8192, max free sz: 3342
# GC memory layout; from 20006300:
# 00000: h=MhhhDhhS..BDhDBBSh===hDBDh====B=BBBBBBSB=B.B=BBB.B=.B.B=Bh===B
# 00400: B=h===========Bh==h===================Bh====h=================h=
# 00800: ==============================================================h=
# 00c00: ==============================================================h=
# 01000: h=Bh==..h.S...........h=======h=====Sh==Sh=S................SSh=
# 01400: .........h=..............h====h==============h=h===.............
# 01800: ................................................................
# 01c00: h==................Sh=h=========================================
# 02000: ================================================================
# 02400: ================================================================
# 02800: ================================================================
# 02c00: ================================================================
# 03000: ================================================================
# 03400: ================================================================
# 03800: ================================================================
# 03c00: ================================================================
# 04000: ================================================================
# 04400: ================================================================
# 04800: ================================================================
# 04c00: ================================================================
# 05000: ================================================================
# 05400: ================================================================
# 05800: ================================================================
# 05c00: ================================================================
# 06000: ================================================================
# 06400: ================================================================
# 06800: ================================================================
# 06c00: ================================================================
# 07000: ================================================================
# 07400: ================================================================
# 07800: ================================================================
# 07c00: ================================================================
# 08000: ================================================================
# 08400: ================================================================
# 08800: ================================================================
# 08c00: ================================================================
# 09000: ================================================================
# 09400: ================================================================
# 09800: ================================================================
# 09c00: ================================================================
# 0a000: ================================================================
# 0a400: ================================================================
# 0a800: ================================================================
# 0ac00: ================================================================
# 0b000: ================================================================
# 0b400: ================================================================
# 0b800: ================================================================
# 0bc00: ================================================================
# 0c000: ================================================================
# 0c400: ================================================================
# 0c800: ================================================================
# 0cc00: ================================================================
# 0d000: ================================================================
# 0d400: ================================================================
# 0d800: ================================================================
# 0dc00: ================================================================
# 0e000: ================================================================
# 0e400: ================================================================
# 0e800: ================================================================
# 0ec00: ================================================================
# 0f000: ================================================================
# 0f400: ================================================================
# 0f800: ================================================================
# 0fc00: ================================================================
# 10000: ================================================================
# 10400: ================================================================
# 10800: ================================================================
# 10c00: ================================================================
# 11000: ================================================================
# 11400: ================================================================
# 11800: ================================================================
# 11c00: ================================================================
# 12000: ================================================================
# 12400: ================================================================
# 12800: ================================================================
# 12c00: ================================================================
# 13000: ================================================================
# 13400: ================================================================
# 13800: ================================================================
# 13c00: ================================================================
# 14000: ================================================================
# 14400: ================================================================
# 14800: ================================================================
# 14c00: ================================================================
# 15000: ================================================================
# 15400: ================================================================
# 15800: ================================================================
# 15c00: ================================================================
# 16000: ================================================================
# 16400: ================================================================
# 16800: ================================================================
# 16c00: ================================================================
# 17000: ================================================================
# 17400: ================================================================
# 17800: ================================================================
# 17c00: ================================================================
# 18000: ================================================================
# 18400: ================================================================
# 18800: ================================================================
# 18c00: ================================================================
# 19000: ================================================================
# 19400: ================================================================
# 19800: ================================================================
# 19c00: ================================================================
# 1a000: ================================================================
# 1a400: ================================================================
# 1a800: ================================================================
# 1ac00: ================================================================
# 1b000: ================================================================
# 1b400: ================================================================
# 1b800: ================================================================
# 1bc00: ================================================================
# 1c000: ================================================================
# 1c400: ================================================================
# 1c800: ================================================================
# 1cc00: ================================================================
# 1d000: ================================================================
# 1d400: ================================================================
# 1d800: ================================================================
# 1dc00: ================================================================
# 1e000: ================================================================
# 1e400: ================================================================
# 1e800: ================================================================
# 1ec00: ================================================================
# 1f000: ================================================================
# 1f400: ================================================================
# 1f800: ================================================================
# 1fc00: ================================================================
# 20000: ================================================================
# 20400: ================================================================
# 20800: ================================================================
# 20c00: ================================================================
# 21000: ================================================================
# 21400: ================================================================
# 21800: ================================================================
# 21c00: ======================..........................................
#        (51 lines all free)
# 2ec00: ....................................
